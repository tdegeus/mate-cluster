<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>The queuing system &mdash; Cluster manual  documentation</title>
    
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootswatch-3.2.0/united/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.2.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="Cluster manual  documentation" href="index.html" />
    <link rel="next" title="Monitoring and etiquette" href="etiquette.html" />
    <link rel="prev" title="MaTe clusters" href="mate.html" />

<link rel="stylesheet" type="text/css" href="_static/custom.css" />
<link rel="stylesheet" type="text/css" href="_static/colorbox/colorbox.css" />

<script type="text/javascript" src="_static/colorbox/jquery.colorbox-min.js"></script>

<script type="text/javascript">
	function endsWith(str, suffix) {
	    return str.indexOf(suffix, str.length - suffix.length) !== -1;
	}

    $(document).ready(function() {
    	var im, imsrc;
    	$('img').each(function() {
    		im = $(this);
    		imsrc = im.attr('src');
    		imalt = im.attr('alt');
    		if (endsWith(imsrc, 'svg')) {
    			im.wrap($('<a>').attr({'href': imsrc, 'title': imalt}).addClass('svglink'));
    		}
        if (endsWith(imsrc, 'png')) {
    			im.wrap($('<a>').attr({'href': imsrc, 'title': imalt}).addClass('pnglink'));
    		}
    	});

    	$('a.svglink').colorbox({
    		'width': '85%',
    		'height': '85%',
    		'photo': true});

      $('a.pnglink').colorbox({
    		'width': '85%',
    		'height': '85%',
    		'photo': true});


    });

</script>

  </head>
  <body>

  <div id="navbar" class="navbar navbar-inverse navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html"><img src="_static/MateLogo.png">
          Cluster manual</a>
        <span class="navbar-text navbar-version pull-left"><b></b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="mate.html">MaTe clusters</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">The queuing system</a></li>
<li class="toctree-l1"><a class="reference internal" href="etiquette.html">Monitoring and etiquette</a></li>
<li class="toctree-l1"><a class="reference internal" href="tips.html">FAQ and tips</a></li>
<li class="toctree-l1"><a class="reference internal" href="linux_bash.html">Linux</a></li>
<li class="toctree-l1"><a class="reference internal" href="linux_bash.html#the-bash-shell">The BASH-shell</a></li>
<li class="toctree-l1"><a class="reference internal" href="languages.html">Language specific remarks/examples</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="people.html">Cluster users</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">The queuing system</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#pbs-directives">PBS directives</a></li>
<li><a class="reference internal" href="#my-first-pbs-job">My first PBS job</a></li>
<li><a class="reference internal" href="#multiple-core-job">Multiple core job</a></li>
<li><a class="reference internal" href="#heavy-file-io-job">Heavy file-IO job</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="mate.html" title="Previous Chapter: MaTe clusters"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; MaTe clusters</span>
    </a>
  </li>
  <li>
    <a href="etiquette.html" title="Next Chapter: Monitoring and etiquette"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Monitoring and e... &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="_sources/queuing.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><ul>
<li><a class="reference internal" href="#">The queuing system</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#pbs-directives">PBS directives</a></li>
<li><a class="reference internal" href="#my-first-pbs-job">My first PBS job</a></li>
<li><a class="reference internal" href="#multiple-core-job">Multiple core job</a></li>
<li><a class="reference internal" href="#heavy-file-io-job">Heavy file-IO job</a></li>
</ul>
</li>
</ul>

<div id="sourcelink">
  <a href="_sources/queuing.txt"
     rel="nofollow">Source</a>
</div>
<form action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
        </div>
      </div>
    <div class="col-md-9">
      
  <div class="section" id="the-queuing-system">
<span id="page-queuing"></span><h1>The queuing system<a class="headerlink" href="#the-queuing-system" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="outline">
<p class="topic-title first"><strong>Outline</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#overview" id="id1">Overview</a></li>
<li><a class="reference internal" href="#pbs-directives" id="id2">PBS directives</a></li>
<li><a class="reference internal" href="#my-first-pbs-job" id="id3">My first PBS job</a></li>
<li><a class="reference internal" href="#multiple-core-job" id="id4">Multiple core job</a></li>
<li><a class="reference internal" href="#heavy-file-io-job" id="id5">Heavy file-IO job</a></li>
</ul>
</div>
<p>The clusters are equipped with a scheduler or queuing system, which distributes the jobs over the cluster&#8217;s resources. On the MaTe clusters the <a class="reference external" href="http://www.adaptivecomputing.com/products/torque.php">TORQUE</a> queuing system is installed together with the <a class="reference external" href="http://www.adaptivecomputing.com/resources/docs/maui/index.php">Maui</a> resource scheduler. This system is very similar to the <a class="reference external" href="http://en.wikipedia.org/wiki/Portable_Batch_System">PBS</a> queuing system.</p>
<div class="section" id="overview">
<h2><a class="toc-backref" href="#outline">Overview</a><a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>The interaction with the queuing system is accomplished using the following commands:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">qsub</span></tt>: issue a job to the queue;</li>
<li><tt class="docutils literal"><span class="pre">qdel</span></tt>: delete a job from the queue;</li>
<li><tt class="docutils literal"><span class="pre">qstat</span></tt>: get queue status;</li>
<li><tt class="docutils literal"><span class="pre">qpeek</span></tt> followed by the job-id: preview the output file.</li>
</ul>
<p>Details are found in the manual pages:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="o">[</span>username@furnace ~<span class="o">]</span><span class="nv">$ </span> man qsub
<span class="o">[</span>username@furnace ~<span class="o">]</span><span class="nv">$ </span> man qdel
<span class="o">[</span>username@furnace ~<span class="o">]</span><span class="nv">$ </span> man qstat
</pre></div>
</div>
<p>As explained, the queuing system decides which job runs on which compute node. To this end, the user has to specify the resources needed per job. A job in this case is a series of commands (e.g. Bash, Matlab, etc.) which are grouped in a script, often referred to as the PBS-script (as it frequently has the extension <tt class="docutils literal"><span class="pre">.pbs</span></tt>. The resources, and other options of the queuing system, can be specified in two &#8211; equivalent &#8211; ways:</p>
<ol class="arabic simple">
<li>as options to the <tt class="docutils literal"><span class="pre">qsub</span></tt> command</li>
<li>in the header of the <tt class="docutils literal"><span class="pre">.pbs</span></tt> script</li>
</ol>
<p>All qsub-options are found in the manual page, several common options are shown in <a class="reference internal" href="#page-queuing-pbs"><em>PBS directives</em></a>.</p>
<p>Monitoring the job is done with the <tt class="docutils literal"><span class="pre">qstat</span></tt> command. To get all information available of all jobs use the <tt class="docutils literal"><span class="pre">qstat</span> <span class="pre">-f</span></tt> command.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The customized <tt class="docutils literal"><span class="pre">myqstat</span></tt> script which is available on the furnace cluster. This script generates more readable reports of the currently running jobs. See also:</p>
<ul class="last simple">
<li><tt class="docutils literal"><span class="pre">myqstat</span> <span class="pre">-h</span></tt></li>
<li><a class="reference internal" href="etiquette.html#etiquette-monitor-jobs"><em>Monitor jobs</em></a></li>
</ul>
</div>
</div>
<div class="section" id="pbs-directives">
<span id="page-queuing-pbs"></span><h2><a class="toc-backref" href="#outline">PBS directives</a><a class="headerlink" href="#pbs-directives" title="Permalink to this headline">¶</a></h2>
<p>Several PBS directives are listed here. The next sections cover several useful examples.</p>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="82%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Option</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">-S</span> <span class="pre">/bin/bash</span></tt></td>
<td>Specify to use the <tt class="docutils literal"><span class="pre">bash</span></tt> shell on the compute node.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">-j</span> <span class="pre">oe</span></tt></td>
<td>Join the &#8220;standard output&#8221; and &#8220;standard error&#8221; streams into the first stream mentioned (&#8220;standard output&#8221; for the
script above)</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">-o</span> <span class="pre">pbs.out</span></tt></td>
<td>Specify a file name (and location) for the &#8220;standard output&#8221;</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">-N</span> <span class="pre">myjobname</span></tt></td>
<td>Specify the job name (also visible in the queue) if not specified it defaults to the file name of the <tt class="docutils literal"><span class="pre">.pbs</span></tt> script</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">-l</span> <span class="pre">nodes=1:ppn=2</span></tt></td>
<td>Claim on one node two cores (ppn = processors per node)</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">-l</span> <span class="pre">nodes=1:ppn=1:intel</span></tt></td>
<td>Claim on one Intel node one core</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">-l</span> <span class="pre">nodes=1:ppn=8:amd</span></tt></td>
<td>Claim on one AMD node eight cores</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">-l</span> <span class="pre">pmem=3gb</span></tt></td>
<td>Claim 3 gigabytes of physical memory, however in most cases this option is unnecessary</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">-l</span> <span class="pre">pvmem=3gb</span></tt></td>
<td>Specifies a maximum virtual (swap) memory of three giga-byte for each process in the job. Specify this option to make
sure that your job will not kill other jobs on the same node by using all swap-space</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <tt class="docutils literal"><span class="pre">pmem</span></tt> is used for proper distribution over the different compute-nodes, the <tt class="docutils literal"><span class="pre">pvmem</span></tt> is used to kill the job if more than the specified amount of memory is used.</p>
</div>
</div>
<div class="section" id="my-first-pbs-job">
<h2><a class="toc-backref" href="#outline">My first PBS job</a><a class="headerlink" href="#my-first-pbs-job" title="Permalink to this headline">¶</a></h2>
<p>Consider this very simple <tt class="docutils literal"><span class="pre">.pbs</span></tt> script written in Bash:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="c">#!/bin/bash</span>
<span class="c">#PBS -S /bin/bash</span>
<span class="c">#PBS -j oe</span>
<span class="c">#PBS -o pbs.out</span>
<span class="c">#PBS -l nodes=1:ppn=1:intel</span>

<span class="c"># print the working directory</span>
<span class="nb">pwd</span>

<span class="c"># print a personal string</span>
<span class="nb">echo</span> <span class="s2">&quot;Hello world&quot;</span>

<span class="c"># wait 20 seconds</span>
sleep 20
</pre></div>
</div>
<p><a class="reference download internal" href="_downloads/myfirst.pbs"><tt class="xref download docutils literal"><span class="pre">source:</span> <span class="pre">myfirst.pbs</span></tt></a></p>
<p>The queuing system reads all lines until the first line not starting with a <tt class="docutils literal"><span class="pre">#</span></tt>. For each line starting with <tt class="docutils literal"><span class="pre">#PBS</span></tt>, the options, called <a class="reference internal" href="#page-queuing-pbs"><em>PBS directives</em></a>, will be interpreted.</p>
<p>This job can be started using</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="o">[</span>username@furnace ~<span class="o">]</span><span class="nv">$ </span> qsub myfirst.pbs
37892.furnace.wfw.wtb.tue.nl
</pre></div>
</div>
<p>The job is entered to the queuing system and is assigned an ID-number, e.g. <tt class="docutils literal"><span class="pre">37892</span></tt>. The job will be queued, and if a single Intel core is free it will run. The status of the job is monitored using <tt class="docutils literal"><span class="pre">qstat</span></tt>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The job ends quickly, and then disappears from <tt class="docutils literal"><span class="pre">qstat</span></tt></p>
</div>
<p>To check the result we can look at the stored &#8220;standard output&#8221;:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="o">[</span>username@furnace ~<span class="o">]</span><span class="nv">$ </span> cat pbs.out
/home/username
Hello world
</pre></div>
</div>
</div>
<div class="section" id="multiple-core-job">
<h2><a class="toc-backref" href="#outline">Multiple core job</a><a class="headerlink" href="#multiple-core-job" title="Permalink to this headline">¶</a></h2>
<p>Now consider this <tt class="docutils literal"><span class="pre">.pbs</span></tt> script</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="c">#!/bin/bash</span>
<span class="c">#PBS -S /bin/bash</span>
<span class="c">#PBS -j oe</span>
<span class="c">#PBS -o pbs.out</span>
<span class="c">#PBS -l nodes=1:ppn=2:intel</span>

<span class="nb">echo</span> <span class="s2">&quot;Hello world&quot;</span>
</pre></div>
</div>
<p><a class="reference download internal" href="_downloads/parallel.pbs"><tt class="xref download docutils literal"><span class="pre">source:</span> <span class="pre">parallel.pbs</span></tt></a></p>
<p>This script will cause the queuing system to reserve two cores on one compute-node, for the duration of the job. Similar to above, we start the job and check the output</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="o">[</span>username@furnace ~<span class="o">]</span><span class="nv">$ </span> qsub parallel.pbs
37893.furnace.wfw.wtb.tue.nl
<span class="o">[</span>username@furnace ~<span class="o">]</span><span class="nv">$ </span> cat pbs.out
Hello world
</pre></div>
</div>
<p>Note that during this job two cores were claimed and reserved. However, this does not mean that two cores were used! The command (i.e. <tt class="docutils literal"><span class="pre">echo</span> <span class="pre">&quot;Hello</span> <span class="pre">world&quot;</span></tt>) runs as a single process (with one thread) and therefore only uses one core.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Claiming multiple cores is the easy part of parallelizing your job, the difficult part is getting the program you run to actually use multiple cores. Please keep in mind that every reserved core remains dedicated to the job regardless of whether or not it is actually used; it can therefore not be used by others.</p>
</div>
</div>
<div class="section" id="heavy-file-io-job">
<span id="page-queuing-heavyio"></span><h2><a class="toc-backref" href="#outline">Heavy file-IO job</a><a class="headerlink" href="#heavy-file-io-job" title="Permalink to this headline">¶</a></h2>
<p>Each user has a &#8220;home&#8221; directory on the head node, located at <tt class="docutils literal"><span class="pre">/home/username</span></tt>, or simply <tt class="docutils literal"><span class="pre">~</span></tt>. This directory is mounted on each compute-node at the same location over a network connection. This means that, your data is automatically available on each compute-node, without the need to copy it. However, this also means that all Input/Output (IO) (i.e. reading and writing of files) must pass over the relatively slow network connection. Some jobs use a lot of &#8220;file IO&#8221; (e.g. MSC Marc or Abaqus) and for these jobs it is better to:</p>
<ol class="arabic simple">
<li>Transfer all necessary files to the local hard-drive on the compute-node [network traffic].</li>
<li>Execute the job [no network traffic].</li>
<li>Transfer the results back to the home folder, which is actually on the head-node [network traffic].</li>
</ol>
<a class="reference internal image-reference" href="_images/heavyio.svg"><img src="_images/heavyio.svg" width="600px" /></a>
<p>Consider this example <tt class="docutils literal"><span class="pre">.pbs</span></tt> script (which is executed (only) on the compute-node)</p>
<div class="highlight-bash"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54</pre></div></td><td class="code"><div class="highlight"><pre><span class="c">#!/bin/bash</span>
<span class="c">#PBS -S /bin/bash</span>
<span class="c">#PBS -j oe</span>
<span class="c">#PBS -o pbs.out</span>
<span class="c">#PBS -l nodes=1:ppn=1:intel</span>

<span class="c"># store my username</span>
<span class="nv">username</span><span class="o">=</span><span class="sb">`</span>whoami<span class="sb">`</span>

<span class="c"># set the name of the temporary directory on the compute-node</span>
<span class="c"># the name is a combination of the username and the job-id</span>
<span class="c"># assigned by the queuing system</span>
<span class="nv">computedir</span><span class="o">=</span><span class="s2">&quot;/state/partition1/$username/${PBS_JOBID%%.*}&quot;</span>

<span class="c"># 1. Transfer to node</span>
<span class="c"># ===================</span>

<span class="c"># create temp directory</span>
<span class="k">if</span> <span class="o">[</span> ! -d <span class="s2">&quot;$computedir&quot;</span> <span class="o">]</span>; <span class="k">then</span>
   <span class="c"># if it does not exist, create</span>
   mkdir -p <span class="s2">&quot;$computedir&quot;</span>
<span class="k">else</span>
   <span class="c"># else, empty the directory</span>
   rm -rf <span class="s2">&quot;${computedir}&quot;</span>/*
<span class="k">fi</span>

<span class="c"># change current directory, to location of qsub command</span>
<span class="c"># typically in the home directory on the head-node</span>
<span class="nb">cd</span> <span class="k">${</span><span class="nv">PBS_O_WORKDIR</span><span class="k">}</span>
<span class="c"># copy input files</span>
cp -prf * <span class="nv">$computedir</span>
<span class="c"># change directory to the temporary directory on the compute-node</span>
<span class="nb">cd</span> <span class="nv">$computedir</span>

<span class="c"># 2. Execute</span>
<span class="c"># ==========</span>

<span class="c"># create a file with the hostname in the folder from which the </span>
<span class="c"># PBS-script was submitted</span>
<span class="nb">echo</span> <span class="sb">`</span>hostname<span class="sb">`</span> &gt; <span class="k">${</span><span class="nv">PBS_O_WORKDIR</span><span class="k">}</span>/computenode.txt

<span class="c"># a simple script (replace by your commands)</span>
<span class="nb">echo</span> <span class="s2">&quot;Hello world&quot;</span>
sleep 5

<span class="c"># 3. Transfer back to the head-node</span>
<span class="c"># =================================</span>

<span class="c"># change to directory to the home directory (on the head-node)</span>
<span class="nb">cd</span> <span class="s2">&quot;${PBS_O_WORKDIR}&quot;</span>
<span class="c"># copy everything from the compute-node</span>
cp -prf <span class="s2">&quot;${computedir}&quot;</span>/* .
<span class="c"># erase the temp directory on compute-node</span>
rm -rf <span class="s2">&quot;$computedir&quot;</span>
</pre></div>
</td></tr></table></div>
<p><a class="reference download internal" href="_downloads/withtransfer.pbs"><tt class="xref download docutils literal"><span class="pre">source:</span> <span class="pre">withtransfer.pbs</span></tt></a></p>
<p>Let us examine several lines of this script:</p>
<ol class="arabic simple" start="8">
<li>the username is stored in the variable <tt class="docutils literal"><span class="pre">username</span></tt> (the used quotes are called back-quotes)</li>
</ol>
<ol class="arabic simple" start="13">
<li>the path of a temporary directory is constructed using the username and the unique job id</li>
</ol>
<ol class="arabic simple" start="19">
<li>test if the <tt class="docutils literal"><span class="pre">$computedir</span></tt> location exists or not</li>
</ol>
<ol class="arabic simple" start="21">
<li>if it does not exist, create it including any necessary parent directories (<tt class="docutils literal"><span class="pre">-p</span></tt> option)</li>
</ol>
<ol class="arabic simple" start="24">
<li>if it does exist, then a previous job (with the same name) accidentally left it lingering, clean the contents and it is ready for re-use</li>
</ol>
<ol class="arabic simple" start="29">
<li>change to the directory where qsub was issued, which is typically in the user&#8217;s home-folder on the head node</li>
</ol>
<ol class="arabic simple" start="31">
<li>copy the entire contents to the temporary directory (which is local on the compute-node)</li>
</ol>
<ol class="arabic simple" start="33">
<li>change to the temporary directory</li>
</ol>
<p>42-44. the execute part, the reason why we issued this job, typically some heavy MSC-Marc, Matlab, Fortan, C program</p>
<ol class="arabic simple" start="50">
<li>change back to the qsub directory (on the head node)</li>
</ol>
<ol class="arabic simple" start="52">
<li>copy everything from the temporary directory to here (the <tt class="docutils literal"><span class="pre">.</span></tt> means here)</li>
</ol>
<ol class="arabic simple" start="54">
<li>delete the temporary directory</li>
</ol>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">If your job fails in any way it will leave your data on the compute-node, please remember to clean it manually (see <a class="reference internal" href="etiquette.html#etiquette-monitor-resources-rocks"><em>User-data on compute-nodes</em></a>).</p>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2014, Tom de Geus.<br/>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.2.<br/>
    </p>
  </div>
</footer>
  </body>
</html>